{"version":3,"sources":["components/field.js","components/languages.js","components/translate.js","App.js","index.js"],"names":["field","_ref","label","value","onChange","react_default","a","createElement","className","e","target","LANGUAGES","Languages","language","onLanguageChange","undefined","languageConfig","find","l","Error","concat","_useState","useState","_useState2","Object","slicedToArray","open","setOpen","onClick","map","_ref2","key","Math","random","href","_callee","text","ya_token","cancelToken","_yield$axios$post","data","_regeneratorRuntime","wrap","_context","prev","next","axios","post","folderId","texts","targetLanguageCode","headers","Authorization","Content-Type","token","sent","abrupt","translations","t0","stop","translate","translated","setTranslated","useEffect","CancelToken","source","setTranslate","then","cancel","err","App","setLanguage","_useState3","_useState4","setText","languages","getToken","options","src_regeneratorRuntime","url","method","Promise","resolve","reject","request","res","body","JSON","parse","catch","console","log","setInterval","setTimeout","render","document","querySelector"],"mappings":"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","file":"static/js/main.1a9ceace.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default ({ label, value, onChange }) => {\n  return (\n    <div>\n      <label>{label}</label>\n      <input\n        className=\"input\"\n        value={value}\n        onChange={e => onChange(e.target.value)}\n      />\n    </div>\n  );\n};\n","/* eslint-disable */\nimport React, { useState } from \"react\";\n\nconst LANGUAGES = [\n  { label: \"Afrikaans\", value: \"af\" },\n  { label: \"Arabic\", value: \"ar\" },\n  { label: \"French\", value: \"fr\" },\n  { label: \"Hindi\", value: \"hi\" },\n  { label: \"Japanese\", value: \"ja\" },\n  { label: \"Portuguese\", value: \"pt\" },\n  { label: \"English\", value: \"en\" },\n  { label: \"Simplified Chinese\", value: \"zh-CN\" },\n  { label: \"Spanish\", value: \"es\" },\n  { label: \"Swahili\", value: \"sw\" },\n  { label: \"Thai\", value: \"th\" }\n];\n\nconst Languages = ({ language, onLanguageChange }) => {\n  if (language === undefined) {\n    language = \"en\";\n  }\n  const languageConfig = LANGUAGES.find((l) => l.value === language);\n  if (!languageConfig) {\n    throw new Error(`Unknown language code '${language}'`);\n  }\n\n  const [open, setOpen] = useState(false);\n\n  const onSelect = (language) => {\n    setOpen(false);\n    onLanguageChange(language);\n  };\n\n  return (\n    <div>\n      <label className=\"label\">Введите язык</label>\n      <div className={`dropdown ${open && \"is-active\"}`}>\n        <div className=\"dropdown-trigger\">\n          <button className=\"button\" onClick={() => setOpen(!open)}>\n            <span>{languageConfig.label}</span>\n            <span className=\"icon is-small\">\n              <i className=\"fas fa-angle-down\" />\n            </span>\n          </button>\n        </div>\n        <div className=\"dropdown-menu\">\n          <div className=\"dropdown-content\">\n            {LANGUAGES.map(({ label, value }) => {\n              return (\n                <a\n                  key={Math.random()}\n                  href=\"#\"\n                  onClick={() => onSelect(value)}\n                  className=\"dropdown-item\"\n                >\n                  {label}\n                </a>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Languages;\n","import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nasync function setTranslate(text, language, ya_token, cancelToken) {\n    try {\n        const { data } = await axios.post(\n          \"https://cors.eu.org/https://translate.api.cloud.yandex.net/translate/v2/translate\",\n          {\n              'folderId': 'b1g794ojrpnuq6goijo2',\n              'texts': [`${text}`],\n              'targetLanguageCode': `${language}`\n          },\n          {\n              headers: {\n                  'Authorization': `Bearer ${ya_token}`,\n                  'Content-Type': 'application/json',\n              },\n              cancelToken: cancelToken.token\n          }\n      );\n      return data.translations[0].text;\n    } \n    catch (err) {\n        return \"\";\n    }\n}\n\nexport default ({ text, language, ya_token }) => {\n  const [translated, setTranslated] = useState(\"\");\n  \n    useEffect(() => {\n    if (!text) {\n      return;\n    }\n\n    const cancelToken = axios.CancelToken.source();\n\n    setTranslate(text, language, ya_token, cancelToken).then(setTranslated);\n\n    return () => {\n      try {\n        cancelToken.cancel();\n      } catch (err) {}\n    };\n  }, [text, language, ya_token]);\n  \n  return (\n    <div>\n      <label className=\"label\">Output</label>\n      <h1 className=\"title\">{translated}</h1>\n    </div>\n  );\n};\n","import \"./styles.css\";\nimport React, { useState } from \"react\";\nimport Field from \"./components/field\";\nimport Languages from \"./components/languages\";\nimport Translate from \"./components/translate\";\n\nexport default function App({ ya_token }) {\n  const [language, setLanguage] = useState(\"en\");\n  const [text, setText] = useState(\"Реакция\");\n\n  return (\n    <div>\n      <Field label=\"Введите русские слова\" onChange={setText} value={text} />\n      <Languages language={language} onLanguageChange={setLanguage} />\n      <hr />\n      <Translate text={text} language={language} ya_token={ya_token}/>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./App\";\nimport request from \"request\";\n\nlet ya_token = '';\n\ngetToken();\nsetInterval(() => { getToken(); }, 3600000);\n\nasync function getToken() {\n    const options = {\n        url: 'https://functions.yandexcloud.net/d4ephdm6rmlnn86jascc',\n        method: 'GET'\n    };\n    return new Promise((resolve, reject) => {\n        request(options, (err, res, body) => {\n            if (err) {\n                return reject(err);\n            }\n            return resolve([res, body]);\n        });\n    }).then( (res) => { ya_token = JSON.parse(res[1])[\"access_token\"]; })\n      .catch(err => { console.log(err); });\n}\n\nsetTimeout(() => { render(<App ya_token={ya_token}/>, document.querySelector(\"#root\")); }, 500);\n"],"sourceRoot":""}